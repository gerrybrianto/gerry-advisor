{"ast":null,"code":"import { forkJoin, Observable } from 'rxjs';\nimport { map, switchMap } from 'rxjs/operators';\nimport { addRestaurant, removeRestaurant } from './store/restaurants.actions';\nimport { selectRestaurantCollection, selectRestaurants } from './store/restaurants.selector';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/store\";\nimport * as i2 from \"./restaurant-list/restaurants.service\";\nimport * as i3 from \"@angular/google-maps\";\nimport * as i4 from \"./restaurant-list/restaurant-list.component\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"@angular/common\";\nexport class AppComponent {\n  constructor(store, restaurantsService) {\n    this.store = store;\n    this.restaurantsService = restaurantsService;\n    this.title = 'gerry-advisor';\n    this.googleMapOptions = {};\n    this.cart = google.maps.Map;\n    this.infoWindow = google.maps.InfoWindow;\n    this.restaurants$ = this.store.select(selectRestaurants);\n    this.restaurantCollection$ = this.store.select(selectRestaurantCollection);\n    this.restaurantsWithRatings$ = new Observable();\n  }\n\n  ngOnInit() {\n    const pos = {\n      lat: 48.858370,\n      lng: 2.294481\n    };\n    this.setMapPos(pos, 19);\n    this.restaurantsWithRatings$ = this.restaurantsService.getRestaurants(pos).pipe(map(restaurants => restaurants.map(restaurant => {\n      console.log('restaurant => ', restaurant);\n      returnthis.restaurantsService.getReviews(restaurant.id).pipe(map(ratings => {\n        console.log('ratings => ', ratings);\n        return {\n          restaurant,\n          ratings\n        };\n      }));\n    })), switchMap(restaurantsWithRatings$ => {\n      console.log('r => ', restaurantsWithRatings$);\n      return forkJoin(restaurantsWithRatings$);\n    }));\n  }\n\n  onAdd(restaurantId) {\n    this.store.dispatch(addRestaurant({\n      restaurantId\n    }));\n  }\n\n  onRemove(restaurantId) {\n    this.store.dispatch(removeRestaurant({\n      restaurantId\n    }));\n  }\n\n  zoomOnRestaurant(restaurant) {\n    const pos = {\n      lat: restaurant.lat,\n      lng: restaurant.long\n    };\n    this.setMapPos(pos, 10);\n    console.log('gMapOptions: ', this.googleMapOptions);\n  }\n\n  setMapPos(pos, zoom) {\n    this.googleMapOptions = {\n      center: {\n        lat: pos.lat,\n        lng: pos.lng\n      },\n      zoom: zoom\n    };\n  }\n\n  getRestaurantRatings(restaurant) {\n    return this.restaurantsService.getReviews(restaurant.id).pipe(map(ratings => ({\n      restaurant,\n      ratings\n    })));\n  }\n\n  handleLocationError(browserHasGeolocation, infoWindow, pos) {\n    infoWindow.setPosition(pos);\n    infoWindow.setContent(browserHasGeolocation ? 'Error: The Geolocation service failed.' : \"Error: Your browser doesn't support geolocation.\");\n    infoWindow.open(this.cart);\n  }\n\n}\n\nAppComponent.ɵfac = function AppComponent_Factory(t) {\n  return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.Store), i0.ɵɵdirectiveInject(i2.GooglePlacesService));\n};\n\nAppComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AppComponent,\n  selectors: [[\"app-root\"]],\n  decls: 14,\n  vars: 4,\n  consts: [[1, \"page-container\"], [1, \"page-header\"], [1, \"page-content\"], [1, \"map-container\"], [1, \"map\", 3, \"options\"], [1, \"restaurants-list-container\"], [3, \"restaurantsWithRatings\", \"add\", \"zoomOnRestaurant\"], [1, \"page-footer\"]],\n  template: function AppComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelement(1, \"header\", 1);\n      i0.ɵɵelementStart(2, \"div\", 2);\n      i0.ɵɵelementStart(3, \"section\", 3);\n      i0.ɵɵelementStart(4, \"h2\");\n      i0.ɵɵtext(5, \"Map\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(6, \"google-map\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"section\", 5);\n      i0.ɵɵelementStart(8, \"h2\");\n      i0.ɵɵtext(9, \"Liste des restaurants\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"app-restaurant-list\", 6);\n      i0.ɵɵlistener(\"add\", function AppComponent_Template_app_restaurant_list_add_10_listener($event) {\n        return ctx.onAdd($event);\n      })(\"zoomOnRestaurant\", function AppComponent_Template_app_restaurant_list_zoomOnRestaurant_10_listener($event) {\n        return ctx.zoomOnRestaurant($event);\n      });\n      i0.ɵɵpipe(11, \"async\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(12, \"footer\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(13, \"router-outlet\");\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"options\", ctx.googleMapOptions);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"restaurantsWithRatings\", i0.ɵɵpipeBind1(11, 2, ctx.restaurantsWithRatings$));\n    }\n  },\n  directives: [i3.GoogleMap, i4.RestaurantListComponent, i5.RouterOutlet],\n  pipes: [i6.AsyncPipe],\n  styles: [\".page-content[_ngcontent-%COMP%] {\\n  grid-area: main;\\n  display: flex;\\n  flex: 1 1 0px;\\n}\\n\\n.map-container[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  border: solid red 1px;\\n}\\n\\n.restaurants-list-container[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  overflow: auto;\\n  border: solid red 1px;\\n}\\n\\n.ratings[_ngcontent-%COMP%] {\\n  color: red;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGVBQUE7RUFDQSxhQUFBO0VBQ0EsYUFBQTtBQUNGOztBQUVBO0VBQ0UsYUFBQTtFQUNBLHNCQUFBO0VBQ0EsbUJBQUE7RUFDQSxxQkFBQTtBQUNGOztBQUVBO0VBQ0UsYUFBQTtFQUNBLHNCQUFBO0VBQ0EsbUJBQUE7RUFDQSxjQUFBO0VBQ0EscUJBQUE7QUFDRjs7QUFFQTtFQUNFLFVBQUE7QUFDRiIsImZpbGUiOiJhcHAuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIucGFnZS1jb250ZW50IHtcbiAgZ3JpZC1hcmVhOiBtYWluO1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4OiAxIDEgMHB4O1xufVxuXG4ubWFwLWNvbnRhaW5lciB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGJvcmRlcjogc29saWQgcmVkIDFweDtcbn1cblxuLnJlc3RhdXJhbnRzLWxpc3QtY29udGFpbmVyIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgb3ZlcmZsb3c6IGF1dG87XG4gIGJvcmRlcjogc29saWQgcmVkIDFweDtcbn1cblxuLnJhdGluZ3Mge1xuICBjb2xvcjogcmVkO1xufVxuIl19 */\"]\n});","map":{"version":3,"sources":["/home/gerry/workspace/angular-projects/gerry-advisor/src/app/app.component.ts"],"names":["forkJoin","Observable","map","switchMap","addRestaurant","removeRestaurant","selectRestaurantCollection","selectRestaurants","i0","i1","i2","i3","i4","i5","i6","AppComponent","constructor","store","restaurantsService","title","googleMapOptions","cart","google","maps","Map","infoWindow","InfoWindow","restaurants$","select","restaurantCollection$","restaurantsWithRatings$","ngOnInit","pos","lat","lng","setMapPos","getRestaurants","pipe","restaurants","restaurant","console","log","returnthis","getReviews","id","ratings","onAdd","restaurantId","dispatch","onRemove","zoomOnRestaurant","long","zoom","center","getRestaurantRatings","handleLocationError","browserHasGeolocation","setPosition","setContent","open","ɵfac","AppComponent_Factory","t","ɵɵdirectiveInject","Store","GooglePlacesService","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","AppComponent_Template","rf","ctx","ɵɵelementStart","ɵɵelement","ɵɵtext","ɵɵelementEnd","ɵɵlistener","AppComponent_Template_app_restaurant_list_add_10_listener","$event","AppComponent_Template_app_restaurant_list_zoomOnRestaurant_10_listener","ɵɵpipe","ɵɵadvance","ɵɵproperty","ɵɵpipeBind1","directives","GoogleMap","RestaurantListComponent","RouterOutlet","pipes","AsyncPipe","styles"],"mappings":"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","sourcesContent":["import { forkJoin, Observable } from 'rxjs';\nimport { map, switchMap } from 'rxjs/operators';\nimport { addRestaurant, removeRestaurant } from './store/restaurants.actions';\nimport { selectRestaurantCollection, selectRestaurants, } from './store/restaurants.selector';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/store\";\nimport * as i2 from \"./restaurant-list/restaurants.service\";\nimport * as i3 from \"@angular/google-maps\";\nimport * as i4 from \"./restaurant-list/restaurant-list.component\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"@angular/common\";\nexport class AppComponent {\n    constructor(store, restaurantsService) {\n        this.store = store;\n        this.restaurantsService = restaurantsService;\n        this.title = 'gerry-advisor';\n        this.googleMapOptions = {};\n        this.cart = google.maps.Map;\n        this.infoWindow = google.maps.InfoWindow;\n        this.restaurants$ = this.store.select(selectRestaurants);\n        this.restaurantCollection$ = this.store.select(selectRestaurantCollection);\n        this.restaurantsWithRatings$ = new Observable();\n    }\n    ngOnInit() {\n        const pos = {\n            lat: 48.858370,\n            lng: 2.294481\n        };\n        this.setMapPos(pos, 19);\n        this.restaurantsWithRatings$ = this.restaurantsService\n            .getRestaurants(pos)\n            .pipe(map((restaurants) => restaurants.map(restaurant => {\n            console.log('restaurant => ', restaurant);\n            returnthis.restaurantsService\n                .getReviews(restaurant.id)\n                .pipe(map((ratings) => {\n                console.log('ratings => ', ratings);\n                return { restaurant, ratings };\n            }));\n        })), switchMap((restaurantsWithRatings$) => {\n            console.log('r => ', restaurantsWithRatings$);\n            return forkJoin(restaurantsWithRatings$);\n        }));\n    }\n    onAdd(restaurantId) {\n        this.store.dispatch(addRestaurant({ restaurantId }));\n    }\n    onRemove(restaurantId) {\n        this.store.dispatch(removeRestaurant({ restaurantId }));\n    }\n    zoomOnRestaurant(restaurant) {\n        const pos = {\n            lat: restaurant.lat,\n            lng: restaurant.long,\n        };\n        this.setMapPos(pos, 10);\n        console.log('gMapOptions: ', this.googleMapOptions);\n    }\n    setMapPos(pos, zoom) {\n        this.googleMapOptions = {\n            center: { lat: pos.lat, lng: pos.lng },\n            zoom: zoom,\n        };\n    }\n    getRestaurantRatings(restaurant) {\n        return this.restaurantsService\n            .getReviews(restaurant.id)\n            .pipe(map((ratings) => ({ restaurant, ratings })));\n    }\n    handleLocationError(browserHasGeolocation, infoWindow, pos) {\n        infoWindow.setPosition(pos);\n        infoWindow.setContent(browserHasGeolocation\n            ? 'Error: The Geolocation service failed.'\n            : \"Error: Your browser doesn't support geolocation.\");\n        infoWindow.open(this.cart);\n    }\n}\nAppComponent.ɵfac = function AppComponent_Factory(t) { return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.Store), i0.ɵɵdirectiveInject(i2.GooglePlacesService)); };\nAppComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: AppComponent, selectors: [[\"app-root\"]], decls: 14, vars: 4, consts: [[1, \"page-container\"], [1, \"page-header\"], [1, \"page-content\"], [1, \"map-container\"], [1, \"map\", 3, \"options\"], [1, \"restaurants-list-container\"], [3, \"restaurantsWithRatings\", \"add\", \"zoomOnRestaurant\"], [1, \"page-footer\"]], template: function AppComponent_Template(rf, ctx) { if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelement(1, \"header\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"section\", 3);\n        i0.ɵɵelementStart(4, \"h2\");\n        i0.ɵɵtext(5, \"Map\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(6, \"google-map\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"section\", 5);\n        i0.ɵɵelementStart(8, \"h2\");\n        i0.ɵɵtext(9, \"Liste des restaurants\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"app-restaurant-list\", 6);\n        i0.ɵɵlistener(\"add\", function AppComponent_Template_app_restaurant_list_add_10_listener($event) { return ctx.onAdd($event); })(\"zoomOnRestaurant\", function AppComponent_Template_app_restaurant_list_zoomOnRestaurant_10_listener($event) { return ctx.zoomOnRestaurant($event); });\n        i0.ɵɵpipe(11, \"async\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(12, \"footer\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(13, \"router-outlet\");\n    } if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"options\", ctx.googleMapOptions);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"restaurantsWithRatings\", i0.ɵɵpipeBind1(11, 2, ctx.restaurantsWithRatings$));\n    } }, directives: [i3.GoogleMap, i4.RestaurantListComponent, i5.RouterOutlet], pipes: [i6.AsyncPipe], styles: [\".page-content[_ngcontent-%COMP%] {\\n  grid-area: main;\\n  display: flex;\\n  flex: 1 1 0px;\\n}\\n\\n.map-container[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  border: solid red 1px;\\n}\\n\\n.restaurants-list-container[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  overflow: auto;\\n  border: solid red 1px;\\n}\\n\\n.ratings[_ngcontent-%COMP%] {\\n  color: red;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGVBQUE7RUFDQSxhQUFBO0VBQ0EsYUFBQTtBQUNGOztBQUVBO0VBQ0UsYUFBQTtFQUNBLHNCQUFBO0VBQ0EsbUJBQUE7RUFDQSxxQkFBQTtBQUNGOztBQUVBO0VBQ0UsYUFBQTtFQUNBLHNCQUFBO0VBQ0EsbUJBQUE7RUFDQSxjQUFBO0VBQ0EscUJBQUE7QUFDRjs7QUFFQTtFQUNFLFVBQUE7QUFDRiIsImZpbGUiOiJhcHAuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIucGFnZS1jb250ZW50IHtcbiAgZ3JpZC1hcmVhOiBtYWluO1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4OiAxIDEgMHB4O1xufVxuXG4ubWFwLWNvbnRhaW5lciB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGJvcmRlcjogc29saWQgcmVkIDFweDtcbn1cblxuLnJlc3RhdXJhbnRzLWxpc3QtY29udGFpbmVyIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgb3ZlcmZsb3c6IGF1dG87XG4gIGJvcmRlcjogc29saWQgcmVkIDFweDtcbn1cblxuLnJhdGluZ3Mge1xuICBjb2xvcjogcmVkO1xufVxuIl19 */\"] });\n"]},"metadata":{},"sourceType":"module"}